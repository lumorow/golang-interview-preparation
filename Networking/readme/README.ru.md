# Базовые знания по сетям

## REST API

REST API — это способ взаимодействия сайтов и веб-приложений с сервером. Его также называют RESTful «архитектурным стилем».

<h1 align="center"><img class="goldT" src="../../img/rest-api.png" ></h1>

API (Application Programming Interface) — это код, который позволяет двум приложениям обмениваться
данными с сервера. На русском языке его принято называть программным интерфейсом приложения.

REST (Representational State Transfer) — это способ создания API с помощью протокола HTTP.
На русском его называют «передачей состояния представления».
***
### Принципы REST API
У RESTful есть 7 принципов написания кода интерфейсов.

- Отделение клиента от сервера (`Client-Server`).
Клиент — это пользовательский интерфейс сайта или приложения, например, поисковая строка видеохостинга.
В REST API код запросов остается на стороне клиента, а код для доступа к данным — на стороне сервера.
Это упрощает организацию API, позволяет легко переносить пользовательский интерфейс на другую платформу
и дает возможность лучше масштабировать серверное хранение данных.

- Отсутствие записи состояния клиента (`Stateless`). Сервер не должен хранить информацию о состоянии
(проведенных операций) клиента. Каждый запрос от клиента должен содержать только ту информацию,
которая нужна для получения данных от сервера.

- Кэшируемость (`Casheable`). В данных запроса должно быть указано, нужно ли кэшировать данные
(сохранять в специальном буфере для частых запросов). Если такое указание есть, клиент получит
право обращаться к этому буферу при необходимости.

- Единство интерфейса (`Uniform Interface`). Все данные должны запрашиваться через один URL-адрес
стандартными протоколами, например, HTTP. Это упрощает архитектуру сайта или приложения и делает
взаимодействие с сервером понятнее.

- Многоуровневость системы (`Layered System`). В RESTful сервера могут располагаться на разных уровнях,
при этом каждый сервер взаимодействует только с ближайшими уровнями и не связан запросами с другими.

- Предоставление кода по запросу (`Code on Demand`). Серверы могут отправлять клиенту код
(например, скрипт для запуска видео). Так общий код приложения или сайта становится сложнее только при необходимости.

- Начало от нуля (`Starting with the Null Style`). Клиент знает только одну точку входа на сервер.
Дальнейшие возможности по взаимодействию обеспечиваются сервером.

***
### В REST API есть 4 метода HTTP, которые используют для действий с объектами на серверах:

- GET (получение информации о данных или списка объектов)
- DELETE (удаление данных)
- POST (добавление или замена данных)
- PUT (регулярное обновление данных)

Такие запросы еще называют идентификаторами `CRUD`: create (создать), read (прочесть), update (обновить) delete (удалить).
Это стандартный набор действий для работы с данными.

## TCP и UDP. В каком случае UDP предпочтительнее?

`TCP` – транспортный протокол передачи данных в сетях `TCP/IP`, предварительно устанавливающий соединение с сетью.  
`UDP` – транспортный протокол, передающий сообщения-датаграммы без необходимости установки соединения в `IP`-сети.

Разница между протоколами `TCP` и `UDP` – в так называемой "гарантии доставки". `TCP` требует отклика от клиента,
которому доставлен пакет данных, подтверждения доставки, и для этого ему необходимо установленное заранее соединение.
Также протокол `TCP` считается надежным, тогда как `UDP` получил даже именование “протокол ненадежных датаграмм.
`TCP` исключает потери данных, дублирование и перемешивание пакетов, задержки. `UDP` все это допускает, и соединение
для работы ему не требуется. Процессы, которым данные передаются по `UDP`, должны обходиться полученным,
даже и с потерями. `TCP` контролирует загруженность соединения, `UDP` не контролирует ничего, кроме целостности полученных
датаграмм.  
С другой стороны, благодаря такой не избирательности и бесконтрольности, `UDP` доставляет пакеты данных (датаграммы)
гораздо быстрее, потому для приложений, которые рассчитаны на широкую пропускную способность и быстрый обмен,
`UDP` можно считать оптимальным протоколом. К таковым относятся сетевые и браузерные игры, а также программы просмотра
потокового видео и приложения для видеосвязи (или голосовой): от потери пакета, полной или частичной, ничего не меняется,
повторять запрос не обязательно, зато загрузка происходит намного быстрее. Протокол `TCP`, как более надежный,
с успехом применяется даже в почтовых программах, позволяя контролировать не только трафик, но и длину сообщения
и скорость обмена трафиком.

## Что такое NAT?
***
Сети обычно проектируются с использованием частных `IP` адресов.
Это адреса `10.0.0.0/8`, `172.16.0.0/12` и `192.168.0.0/16`. Эти частные адреса используются внутри организации или площадки,
чтобы позволить устройствам общаться локально, и они не маршрутизируются в интернете. Чтобы позволить устройству с
приватным `IPv4`-адресом обращаться к устройствам и ресурсам за пределами локальной сети, приватный адрес сначала должен
быть переведен на общедоступный публичный адрес.

И вот как раз `NAT` переводит приватные адреса, в общедоступные. Это позволяет устройству с частным адресом `IPv4`
обращаться к ресурсам за пределами его частной сети. `NAT` в сочетании с частными адресами `IPv4` оказался полезным
методом сохранения общедоступных `IPv4`-адресов. Один общедоступный `IPv4`-адрес может быть использован сотнями, даже
тысячами устройств, каждый из которых имеет частный `IPv4`-адрес. `NAT` имеет дополнительное преимущество, заключающееся
в добавлении степени конфиденциальности и безопасности в сеть, поскольку он скрывает внутренние `IPv4`-адреса из внешних
сетей.

## Что такое HTTP и HTTPS, в чем их отличия?
***
`HTTP` (от англ. HyperText Transfer Protocol — протокол передачи гипертекста) — это прикладной протокол передачи данных
в сети. На текущий момент используется для получения информации с веб-сайтов. Протокол `HTTP` основан на использовании
технологии «клиент-сервер»: клиент, отправляющий запрос, является инициатором соединения; сервер, получающий запрос,
выполняет его и отправляет клиенту результат.

`HTTPS` (от англ. HyperText Transfer Protocol Secure — безопасный протокол передачи гипертекста) — это расширение
протокола `HTTP`, поддерживающее шифрование посредством криптографических протоколов `SSL` и `TLS`.

### Чем отличаются HTTP от HTTPS:

`HTTPS` не является отдельным протоколом передачи данных, а представляет собой расширение протокола `HTTP` с надстройкой шифрования;
передаваемые по протоколу `HTTP` данные не защищены, `HTTPS` обеспечивает конфиденциальность информации путем ее шифрования;
`HTTP` использует порт 80, `HTTPS` — порт 443.

## Что такое SSL и TLS, есть ли между ними отличия?
***
`SSL` или слой защищенных сокетов было оригинальным названием протокола, который разработала компания `Netscape`
в середине 90-х. SSL 1.0 никогда не был публично доступным, а в версии 2.0 были серьезные недостатки.
Протокол `SSL 3.0`, выпущенный в 1996, был полностью переделан и задал тон следующей стадии развития.

Когда следующую версию протокола выпустили в 1999, ее стандартизировала специальная рабочая группа проектирования
сети Интернет и дала ей новое название: защита транспортного уровня, или `TLS`. Как говорится в `TLS`-документации,
«разница между этим протоколом и S`SL 3.0` не критичная». `TLS` и `SSL` формируют постоянно обновляемую серию протоколов,
и их часто объединяют под названием `SSL`/`TLS`.  
Протокол `TLS` шифрует интернет-трафик любого вида. Самый распространенный вид — веб-трафик. Вы знаете, когда ваш браузер устанавливает соединение по TLS — если ссылка в адресной строке начинается с «https».
`TLS` также используется другими приложениями — например, в почте и системах телеконференций.
Самый безопасный метод шифрования — это асимметричное шифрование. Для этого требуется 2 ключа, 1 публичный и 1 приватный. Это файлы с информацией, чаще всего очень большие числа. Механизм сложный, но если попросту, вы можете использовать публичный ключ, чтобы шифровать данные, но вам нужен приватный ключ, чтобы расшифровывать их. Два ключа связаны с помощью сложной математической формулы, которую сложно хакнуть.
Так как в асимметричном шифровании применяются сложные математические расчеты, нужно много вычислительных ресурсов. `TLS` решает эту проблему, используя асимметричное шифрование только в начале сессии, чтобы зашифровать общение между сервером и клиентом. Сервер и клиент должны договориться об одном ключе сессии, который они будут вдвоем использовать, чтобы зашифровать пакеты данных.

## Уровни OSI

Модель OSI - описывает, как работают сетевые устройства. Это процесс передачи данных, котроые разделили на 7 уровней.

В процессе передачи данных всегда участвуют устройство-отправитель, устройство-получатель, а также сами данные,
которые должны быть переданы и получены. С точки зрения рядового пользователя задача элементарна — нужно взять
и отправить эти данные. Все, что происходит при отправке и приеме данных, детально описывает семиуровневая модель OSI.
***
### 1-й уровень OSI — физический

Этот слой работает с кабелями, контактами в разъёмах, модуляцией сигнала, кодированием единиц и нулей и другими
низкоуровневыми штуками.
По сути, первый уровень — это уровень проводов и физических способов передачи сигнала. Минимальная абстракция.

Самый известный протокол на физическом уровне — Ethernet. Он описывает, как сигналы кодируются и передаются по проводам.
Кроме него есть Bluetooth, Wi-Fi и ИК-порт, которые также содержат инструкции для передачи данных.

Устройства физического уровня — концентраторы и репитеры. Они работают с физическим сигналом «втупую» и не вникают в его логику: получили данные — передали их дальше по проводу.
***
### 2-й уровень OSI — канальный

Над физическим уровнем располагается канальный. Его задача — проверить целостность полученных данных и исправить ошибки. 
Этот уровень «поумнее» предыдущего: он уже понимает, что разные амплитуды напряжений отвечают разным битам — нулям и
единицам. А ещё канальный уровень умеет кодировать сигналы в биты и передавать их дальше.

Полученные с нижнего уровня данные делятся на фреймы, или кадры. Каждый фрейм состоит из служебной информации — например,
адреса отправителя и адреса получателя, — а также самих данных.

Получается что-то вроде почтового конверта. На лицевой стороне у него написано, от кого пришло письмо, а внутри
находится само письмо (в нашем случае данные).

Лицевая сторона конверта — это MAC-адрес устройства, которое отправило нам информацию. Он нужен, чтобы идентифицировать
устройства в локальной сети, состоит из 48 или 64 бит и выглядит примерно так:


Ещё один важный факт о MAC-адресах: когда на заводе собирают ноутбук или смартфон, ему сразу же присваивают
определённый MAC-адрес, который потом уже никак нельзя поменять. MAC-адрес настольных ПК зашит в сетевую карту,
поэтому его можно изменить, только заменив эту самую карту.
***
### 3-й уровень OSI — сетевой

Этот уровень отвечает за маршрутизацию данных внутри сети между компьютерами.
Здесь уже появляются такие термины, как «маршрутизаторы» и «IP-адреса».

Маршрутизаторы позволяют разным сетям общаться друг с другом: они используют MAC-адреса, чтобы построить
путь от одного устройства к другому.

Данные на сетевом уровне представляются в виде пакетов. Такие пакеты похожи на фреймы из канального уровня,
но используют другие адреса получателя и отправителя — IP-адреса.

Чтобы получить IP-адрес обоих устройств (отправителя и получателя), существует протокол
ARP (address resolution protocol). Он умеет конвертировать MAC- в IP-адрес и наоборот.
***
### 4-й уровень OSI — транспортный

Из названия понятно, что на этом уровне происходит передача данных по сети. Так и есть.
Два главных протокола здесь — TCP и UDP. Они как раз и отвечают за то, как именно будут передаваться данные.
***
### 5-й уровень OSI — сеансовый

Начиная с этого уровня и выше, данные имеют уже нормальный вид — например, привычных нам JPEG- или MP3-файлов.
Задача сети на этих уровнях — представить информацию в понятном для человека виде и сделать так,
чтобы пользователь мог её как-то «потрогать».

Сеансовый уровень управляет соединениями, или сессиями. Типичный пример — звонок по Skype или Zoom.
Когда вы звоните другому человеку, между вашими компьютерами устанавливается соединение,
по которому передаются аудио и видео. Если такое соединение разорвать, то и ваш звонок прервётся.

На сеансовом уровне очень важно, чтобы соединение правильно установилось и поддерживалось.
То есть механизмы протоколов должны проверить, что у обоих собеседников есть нужные кодеки и
сигнал между устройствами присутствует.
***
### 6-й уровень OSI — уровень представления данных

На этом уровне происходит преобразование форматов данных — их кодирование и сжатие.
Например, полученные данные могут превратиться в GIF- или MP4-файл. То же самое происходит
и в обратном порядке: когда пользователь отправляет файл другому человеку, данные сначала конвертируются
в биты и сжимаются, а потом уже передаются на транспортный уровень.

Помимо кодировки и сжатия на уровне представления, данные могут шифроваться — если, конечно, это необходимо.
***
### 7-й уровень OSI — прикладной

Последний уровень модели OSI — прикладной. На нём находятся сетевые службы,
которые помогают без проблем сёрфить в интернете.

Прикладной уровень похож на некий графический интерфейс для всей модели OSI — с его
помощью пользователь взаимодействует с другими уровнями, даже не подозревая об этом. Этот интерфейс называется сетевым.

Самые популярные из сетевых интерфейсов — это HTTP, HTTPS, FTP и SMTP.
А «устройства» здесь — это уже программы: Zoom, Telegram, браузеры.
***
## Дополнительный материал

- [REST API](https://blog.skillfactory.ru/glossary/rest-api/)
- [How the Web Works: A Primer for Newcomers to Web Development (or anyone, really)](https://www.freecodecamp.org/news/how-the-web-works-a-primer-for-newcomers-to-web-development-or-anyone-really-b4584e63585c#.7l3tokoh1)
- [How the Web Works Part II: Client-Server Model & the Structure of a Web Application](https://medium.com/free-code-camp/how-the-web-works-part-ii-client-server-model-the-structure-of-a-web-application-735b4b6d76e3#.e6tmj8112)
- [HTTP 1, 2 и 3 — просто](https://habr.com/ru/articles/739166/)
- [HTTP/1.1 И HTTP/2](https://www.8host.com/blog/v-chem-raznica-mezhdu-http1-1-i-http2/#:~:text=%D0%92%20%D0%BE%D1%82%D0%BB%D0%B8%D1%87%D0%B8%D0%B5%20%D0%BE%D1%82%20HTTP%2F1.1%2C%20%D0%BA%D0%BE%D1%82%D0%BE%D1%80%D1%8B%D0%B9%20%D0%B4%D0%BE%D0%BB%D0%B6%D0%B5%D0%BD%20%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D1%8C%20%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%BE%20%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9,%D0%B2%20%D0%BF%D1%80%D0%B8%D0%B2%D1%8B%D1%87%D0%BD%D0%BE%D0%BC%20%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B5%20%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%2D%D0%BE%D1%82%D0%B2%D0%B5%D1%82.)
- [Простое пособие по сетевой модели OSI для начинающих](https://selectel.ru/blog/osi-for-beginners/)
- [Что такое модель OSI и зачем она нужна: препарируем слоёный пирог интернета](https://skillbox.ru/media/code/chto-takoe-model-osi-i-zachem-ona-nuzhna-prepariruem-sloyenyy-pirog-interneta/)
- [Пакет context в Go: взгляд профессионала](https://habr.com/ru/companies/pt/articles/764850/)

## README.md

- eng [English](https://github.com/lumorow/golang-interview-preparation/blob/main/Networking/README.md)
- ru [Русский](https://github.com/lumorow/golang-interview-preparation/blob/main/Networking/readme/README.ru.md)